---
layout: default
---
{% assign latest_post = site.posts.first %}

<div class="shell-inner home">
  <section class="hero-grid">
    <div class="hero-copy">
      <p class="eyebrow">Fresh thinking</p>
      <h1>An evolving notebook on {{ site.description | default: "markets and making things" }}</h1>
      <div class="lead">
        {{ content | markdownify }}
      </div>
      <div class="cta-row">
        <a class="pill-button" href="{% if latest_post %}{{ latest_post.url | relative_url }}{% else %}{{ '/blog/' | relative_url }}{% endif %}">
          {% if latest_post %}Read the latest{% else %}Browse the blog{% endif %} →
        </a>
        <a class="pill-button secondary" href="{{ '/projects/' | relative_url }}">Explore projects</a>
      </div>
      <div class="stat-row">
        <div class="stat"><strong>{{ site.posts | size }}</strong><span>Published posts</span></div>
        <div class="stat"><strong>{{ site.projects | size }}</strong><span>Hands-on builds</span></div>
        <div class="stat"><strong>{{ site.categories | size }}</strong><span>Recurring themes</span></div>
      </div>
    </div>

    <div class="hero-card">
      <p class="eyebrow">Spotlight</p>
      {% if latest_post %}
        <h3><a href="{{ latest_post.url | relative_url }}">{{ latest_post.title }}</a></h3>
        <div class="meta-row">
          <span>{{ latest_post.date | date: "%b %-d, %Y" }}</span>
          {% if latest_post.categories and latest_post.categories.size > 0 %}
            <span class="pill">{{ latest_post.categories | first | capitalize }}</span>
          {% endif %}
        </div>
        <p>{{ latest_post.excerpt | strip_html | truncatewords: 32 }}</p>
        <a class="text-link" href="{{ latest_post.url | relative_url }}">Continue reading →</a>
      {% else %}
        <p>No posts yet—check back soon.</p>
      {% endif %}
    </div>
  </section>

  <section>
    <div class="section-heading">
      <h2>Fresh writing</h2>
      <a href="{{ '/blog/' | relative_url }}">View all →</a>
    </div>
    <div class="post-grid">
      {% if latest_post and site.posts.size > 1 %}
        {% assign posts_to_show = site.posts offset:1 limit:6 %}
      {% else %}
        {% assign posts_to_show = site.posts limit:6 %}
      {% endif %}
      {% for post in posts_to_show %}
        <article class="post-card">
          <div class="meta-row">
            <span>{{ post.date | date: "%b %-d, %Y" }}</span>
            {% if post.categories and post.categories.size > 0 %}
              <span class="pill">{{ post.categories | first | capitalize }}</span>
            {% endif %}
          </div>
          <h3><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
          <p>{{ post.excerpt | strip_html | truncatewords: 28 }}</p>
          <a class="text-link" href="{{ post.url | relative_url }}">Open post →</a>
        </article>
      {% endfor %}
    </div>
  </section>

  <section>
    <div class="section-heading">
      <h2>Topics I keep coming back to</h2>
      <a href="{{ '/blog/' | relative_url }}">Browse the archive</a>
    </div>
    {% assign sorted_categories = site.categories | sort %}
    <div class="topic-grid">
      {% for category in sorted_categories %}
        {% if category[0] != "posts" %}
          <div class="topic-card">
            <div class="meta-row">
              <span class="pill">{{ category[1].size }} post{% if category[1].size != 1 %}s{% endif %}</span>
              <span>{{ category[1].first.date | date: "%b %-d, %Y" }}</span>
            </div>
            <h3 style="margin: 0.4rem 0 0.45rem;">{{ category[0] | capitalize }}</h3>
            <p style="margin: 0 0 0.6rem;">{{ category[1].first.excerpt | strip_html | truncatewords: 22 }}</p>
            <a class="text-link" href="{{ category[1].first.url | relative_url }}">Latest in this theme →</a>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </section>

  {% if site.projects and site.projects.size > 0 %}
    <section>
      <div class="section-heading">
        <h2>In-progress builds</h2>
        <a href="{{ '/projects/' | relative_url }}">See all projects</a>
      </div>
      <div class="project-rail">
        {% for project in site.projects limit:3 %}
          <article class="project-card">
            <div class="meta-row">
              <span class="pill">Project</span>
            </div>
            <h3><a href="{{ project.url | relative_url }}">{{ project.title }}</a></h3>
            <p>{{ project.description | default: project.excerpt | strip_html | truncatewords: 26 }}</p>
          </article>
        {% endfor %}
      </div>
    </section>
  {% endif %}
</div>
